
// -----------------------------------
// Slidebars
// Version 0.9.4
// http://plugins.adchsm.me/slidebars/
//
// Written by Adam Smith
// http://www.adchsm.me/
//
// Released under MIT License
// http://plugins.adchsm.me/slidebars/license.txt
//
// ---------------------
// Index of Slidebars.js
//
// 001 - Default Settings
// 002 - Feature Detection
// 003 - User Agents
// 004 - Setup
// 005 - Animation
// 006 - Operations
// 007 - API
// 008 - User Input
(function($){$.slidebars=function(options){var settings=$.extend({siteClose:!0,disableOver:!1,hideControlClasses:!1},options);var test=document.createElement('div').style,supportTransition=!1,supportTransform=!1;if(test.MozTransition===''||test.WebkitTransition===''||test.OTransition===''||test.transition==='')supportTransition=!0;if(test.MozTransform===''||test.WebkitTransform===''||test.OTransform===''||test.transform==='')supportTransform=!0;var ua=navigator.userAgent,android=!1,iOS=!1;if(/Android/.test(ua)){android=ua.substr(ua.indexOf('Android')+8,3)}else if(/(iPhone|iPod|iPad)/.test(ua)){iOS=ua.substr(ua.indexOf('OS ')+3,3).replace('_','.')}
if(android&&android<3||iOS&&iOS<5)$('html').addClass('sb-static');if(!$('#sb-site').length)$('body').children().wrapAll('<div id="sb-site" />');var $site=$('#sb-site');if(!$site.parent().is('body'))$site.appendTo('body');if($('.sb-left').length){var $left=$('.sb-left'),leftActive=!1;$left.addClass('sb-slidebar');if(!$left.parent().is('body'))$left.appendTo('body')}
if($('.sb-right').length){var $right=$('.sb-right'),rightActive=!1;$right.addClass('sb-slidebar');if(!$right.parent().is('body'))$right.appendTo('body')}
var init=!1,windowWidth=$(window).width(),$controls=$('.sb-toggle-left, .sb-toggle-right, .sb-open-left, .sb-open-right, .sb-close'),$slide=$('.sb-slide');function initialise(){if(!settings.disableOver||(typeof settings.disableOver==='number'&&settings.disableOver>=windowWidth)){init=!0;$('html').addClass('sb-init');if(settings.hideControlClasses)$controls.removeClass('sb-hide')}else if(typeof settings.disableOver==='number'&&settings.disableOver<windowWidth){init=!1;$('html').removeClass('sb-init');if(settings.hideControlClasses)$controls.addClass('sb-hide');if(leftActive||rightActive)close()}}
initialise();function css(){$site.css('minHeight','');$site.css('minHeight',$('body').height()+'px');if($left&&($left.hasClass('sb-style-push')||$left.hasClass('sb-style-overlay')))$left.css('marginLeft','-'+$left.css('width'));if($right&&($right.hasClass('sb-style-push')||$right.hasClass('sb-style-overlay')))$right.css('marginRight','-'+$right.css('width'));if($left&&$left.hasClass('sb-width-custom'))$left.css('width',$left.attr('data-sb-width'));if($right&&$right.hasClass('sb-width-custom'))$right.css('width',$right.attr('data-sb-width'))}
css();$(window).resize(function(){var resizedWindowWidth=$(window).width();if(windowWidth!==resizedWindowWidth){windowWidth=resizedWindowWidth;initialise();css();if(leftActive)open('left');if(rightActive)open('right')}});$('.social').bind('resize',function(){var resizedWindowWidth=$(window).width();if(windowWidth!==resizedWindowWidth){windowWidth=resizedWindowWidth;initialise();css();if(leftActive)open('left');if(rightActive)open('right')}});var animation;if(supportTransition&&supportTransform){animation='translate';if(android&&android<4.4)animation='side'}else{animation='jQuery'}
function animate(object,amount,side){var selector;if(object.hasClass('sb-style-push')){selector=$site.add(object).add($slide)}else if(object.hasClass('sb-style-overlay')){selector=object}else{selector=$site.add($slide)}
if(animation==='translate'){selector.css('transform','translate('+amount+')')}else if(animation==='side'){if(amount[0]==='-')amount=amount.substr(1);selector.css(side,amount);setTimeout(function(){if(amount==='0px'){selector.removeAttr('style');css()}},400)}else if(animation==='jQuery'){if(amount[0]==='-')amount=amount.substr(1);var properties={};properties[side]=amount;selector.stop().animate(properties,400);setTimeout(function(){if(amount==='0px'){selector.removeAttr('style');css()}},400)}}
function open(side){if(side==='left'&&$left&&rightActive||side==='right'&&$right&&leftActive){close();setTimeout(proceed,400)}else{$("html,body").addClass("no-scroll");proceed()}
function proceed(){if(init&&side==='left'&&$left){$('html').addClass('sb-active sb-active-left');$left.addClass('sb-active');animate($left,$left.css('width'),'left');setTimeout(function(){leftActive=!0},400)}else if(init&&side==='right'&&$right){$('html').addClass('sb-active sb-active-right');$right.addClass('sb-active');animate($right,'-'+$right.css('width'),'right');setTimeout(function(){rightActive=!0},400)}}}
function close(link){$("html,body").removeClass("no-scroll");if(leftActive||rightActive){if(leftActive){animate($left,'0px','left');leftActive=!1}
if(rightActive){animate($right,'0px','right');rightActive=!1}
if(link==="#create"){if(guest==1){window.location.replace(loginUrl)}else{$("#createEventModal").modal("show")}}else{if(link=="/site/#SearchMobile"){setTimeout(function(){$('html').removeClass('sb-active sb-active-left sb-active-right');if($left)$left.removeClass('sb-active');if($right)$right.removeClass('sb-active')},400)}else{setTimeout(function(){$('html').removeClass('sb-active sb-active-left sb-active-right');if($left)$left.removeClass('sb-active');if($right)$right.removeClass('sb-active');if(link)window.location=link},400)}}}}
function toggle(side){if(side==='left'&&$left){if(!leftActive){open('left')}else{close()}}
if(side==='right'&&$right){if(!rightActive){open('right')}else{close()}}}
this.open=open;this.close=close;this.toggle=toggle;this.init=function(){return init};this.active=function(side){if(side==='left'&&$left)return leftActive;if(side==='right'&&$right)return rightActive};function eventHandler(event,selector){event.stopPropagation();event.preventDefault();if(event.type==='touchend')selector.off('click')}
$('.sb-toggle-left').on('touchend click',function(event){eventHandler(event,$(this));toggle('left')});$('.sb-toggle-right').on('touchend click',function(event){eventHandler(event,$(this));toggle('right')});$('.sb-open-left').on('touchend click',function(event){eventHandler(event,$(this));open('left')});$('.sb-open-right').on('touchend click',function(event){eventHandler(event,$(this));open('right')});$('.sb-close').on('touchend click',function(event){$(html).css("overlay-x","");$(body).css("overlay-x","");eventHandler(event,$(this));close()});$('.sb-slidebar a').not('.sb-disable-close').on('click',function(event){eventHandler(event,$(this));close($(this).attr('href'))});$site.on('touchend click',function(event){if(settings.siteClose&&(leftActive||rightActive)){eventHandler(event,$(this));close()}})}})(jQuery)